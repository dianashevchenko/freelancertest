# Installation

We're using Go 13.4.x and [https://goswagger.io/](https://goswagger.io/) tool to generate API server from swagger.yaml file. To start project:

1. Generate API server
```
swagger generate server -A api -f ./swagger.yaml
```

2. Build main package
```
go build ./cmd/images-server/main.go
```

3. Get dependencies
```
go get -u -f ./...
```

4. Run package
```
./main --port=3001
```

## Tasks

Create dummy API service based on the swagger specification


# Image service

This service provides the ability to manage images on AWS S3 with Go. Service will be running on a standalone EC2/docker instance behind nginx proxy. 

The service should provide functionality for following resources:
- POST /listing/{listingid}
- PUT /listing/{listingid}
- DELETE /listing/{listingid}


*listingid* - Identifier of the listing (boat). We're using stringified Mongo's ObjectId. Example: "5ec40f9de9d29a33a53b27e6"

### Codebase

- .vscode - contains 2 helper tasks to generate & build project. Tasks are invoked by Ctrl+Shift+B in VSC
- /cmd - autogenerated directory by go-swagger package
- /controllers - all controllers should be located here. Controllers should manipulate responses - send status OK, or throw Error
- /models - autogenerated directory by go-swagger package. Contains all the models
- /restapi - autogenerated directory by go-swagger package. Contains all the operations. Only editable file is *configure_images.go*
- /services - the logic of controller should be placed here
- swagger.yaml - default swagger file


### Tools

Project toolings are:

*Go swagger* - https://goswagger.io/ generate Go server including models and handlers from default swagger.yaml file

### VSC tasks

Generate new server from swagger.yaml:
```
swagger generate server -A api -f ./swagger.yaml
```

Build main package:
```
go build ./cmd/api-server/main.go
```


### Project plan

TODO:
[-] Upload listing image
[-] Change/Replace listing image
[-] Delete listing image


